<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GEN FrameWork: D:/Projects/GENFrameWork/GEN/Platforms/Linux/GRPLINUXScreenX11.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Logo_Gen_Little_marco.png"/></td>
  <td id="projectalign">
   <div id="projectname">GEN FrameWork<span id="projectnumber">&#160;0.20.0 (Spartan K5)</span>
   </div>
   <div id="projectbrief">General Framework in C/C++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('_g_r_p_l_i_n_u_x_screen_x11_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">GRPLINUXScreenX11.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="_g_r_p_l_i_n_u_x_screen_x11_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span> </div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="comment">/*---- PRECOMPILATION INCLUDES ----------------------------------------------------------------------------------------*/</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="preprocessor">#pragma region PRECOMPILATION_INCLUDES</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span> </div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="preprocessor">#include &quot;<a class="code" href="_g_e_n___defines_8h.html">GEN_Defines.h</a>&quot;</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span> </div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="preprocessor">#pragma endregion</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span> </div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span> </div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="preprocessor">#ifdef LINUX_X11_ACTIVE</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span> </div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span> </div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span><span class="comment">/*---- INCLUDES ------------------------------------------------------------------------------------------------------*/</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span><span class="preprocessor">#pragma region INCLUDES</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span> </div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span><span class="preprocessor">#include &quot;<a class="code" href="_g_r_p_l_i_n_u_x_screen_x11_8h.html">GRPLINUXScreenX11.h</a>&quot;</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span> </div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span><span class="preprocessor">#include &quot;<a class="code" href="_x_trace_8h.html">XTrace.h</a>&quot;</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span> </div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span><span class="preprocessor">#include &quot;<a class="code" href="_g_r_p_canvas_8h.html">GRPCanvas.h</a>&quot;</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span> </div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span><span class="preprocessor">#include &quot;<a class="code" href="_x_memory___control_8h.html">XMemory_Control.h</a>&quot;</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span> </div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span><span class="preprocessor">#pragma endregion</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span> </div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span> </div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span><span class="comment">/*---- GENERAL VARIABLE ----------------------------------------------------------------------------------------------*/</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span><span class="preprocessor">#pragma region GENERAL_VARIABLE</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span> </div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span><span class="preprocessor">#pragma endregion</span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span> </div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span> </div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span><span class="comment">/*---- CLASS MEMBERS -------------------------------------------------------------------------------------------------*/</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span><span class="preprocessor">#pragma region CLASS_MEMBERS</span></div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span> </div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span> </div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>GRPLINUXSCREENX11::GRPLINUXSCREENX11(): <a class="code hl_class" href="class_g_r_p_s_c_r_e_e_n.html">GRPSCREEN</a>()</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>{</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>  Clean();</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span> </div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>  type = <a class="code hl_enumvalue" href="_g_r_p_screen_8h.html#a13ec223f83fb0f13672bfa7b4f0abcb2a826707b209cf4cb191d70a9d2ca9750a">GRPSCREENTYPE_LINUX_X11</a>;</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span> </div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>  display = XOpenDisplay(<a class="code hl_define" href="_x_base_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>  <span class="keywordflow">if</span>(display)</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>    {</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>      <span class="keywordtype">int</span> width  = DisplayWidth  (display, DefaultScreen (display));</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>      <span class="keywordtype">int</span> height = DisplayHeight (display, DefaultScreen (display));</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>      <span class="keywordtype">int</span> depth  = DefaultDepth  (display, DefaultScreen (display));</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span> </div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>      originalwidth   = width;</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>      originalheight  = height;</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span> </div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>      SetSize(width, height);</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>      SetMaxSize(width, height);</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span> </div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>      <span class="keywordflow">switch</span>(depth)</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>        {</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>          <span class="keywordflow">case</span>   8 : SetMode(<a class="code hl_enumvalue" href="_g_r_p_properties_8h.html#af987094c3c6c0910d472c6c95a548365a9207ca848d5052d2735cc569785cc701">GRPPROPERTYMODE_08_INDEX</a>);     <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>          <span class="keywordflow">case</span>  16 : SetMode(<a class="code hl_enumvalue" href="_g_r_p_properties_8h.html#af987094c3c6c0910d472c6c95a548365a79643bdbeae1e79973771780d48194f1">GRPPROPERTYMODE_16_RGB_565</a>);   <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>          <span class="keywordflow">case</span>  24 : SetMode(<a class="code hl_enumvalue" href="_g_r_p_properties_8h.html#af987094c3c6c0910d472c6c95a548365afd21f0dc81224177cb44aec0fc7fc324">GRPPROPERTYMODE_24_BGR_888</a>);   <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>          <span class="keywordflow">case</span>  32 : SetMode(<a class="code hl_enumvalue" href="_g_r_p_properties_8h.html#af987094c3c6c0910d472c6c95a548365a745e53fb66eed25ca4ee68167c68a48d">GRPPROPERTYMODE_32_BGRA_8888</a>); <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>        }</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span> </div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>      SetIsBufferInverse(<span class="keyword">true</span>);</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>    }</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>}</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span> </div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span> </div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>GRPLINUXSCREENX11::~GRPLINUXSCREENX11()</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>{</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>  <span class="keywordflow">if</span>(!display)</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>    {</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>    }</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>      </div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>  ScreenResolution(display, root, originalwidth, originalheight, 60, <span class="keyword">false</span>);</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span> </div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>  Delete();</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span> </div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>  <span class="comment">//XCloseDisplay(display);</span></div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span> </div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>  Clean();</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>}</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span> </div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span> </div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span><span class="keywordtype">bool</span> GRPLINUXSCREENX11::Create(<span class="keywordtype">bool</span> show)</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>{</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>  <span class="keywordflow">if</span>(!display) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span> </div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>  <span class="keywordtype">int</span>                   screen;</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>  <span class="keywordtype">int</span>                   depth;</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>  Visual*               visual;</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>  XSetWindowAttributes  attributes;</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>  <span class="keywordtype">int</span>                   wndwidth  = DisplayWidth (display, DefaultScreen (display));</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>  <span class="keywordtype">int</span>                   wndheight = DisplayHeight (display, DefaultScreen (display));</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span> </div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>  screen     = DefaultScreen(display);</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>  root       = RootWindow(display,screen);</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>  depth      = DefaultDepth(display,screen);</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>  visual     = DefaultVisual(display,screen);</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span> </div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>  attributes.background_pixel   = XBlackPixel(display,screen);</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>  attributes.border_pixel       = XBlackPixel(display,screen);</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>  attributes.override_redirect  = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span> </div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>  <span class="keywordtype">int</span> x = (wndwidth  - width)  / 2;</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>  <span class="keywordtype">int</span> y = (wndheight - height) / 2;</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span> </div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>  window =  XCreateWindow(display,RootWindow(display,screen),x ,y , width, height, 1,depth, 0 <span class="comment">/*InputOutput*/</span>, visual, CWBackPixel | CWBorderPixel | CWOverrideRedirect,&amp;attributes);</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>  <span class="keywordflow">if</span>(!window) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span> </div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>  <span class="keywordflow">if</span>(IsFullScreen())</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>    {</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>      Atom wm_state   = XInternAtom (display, <span class="stringliteral">&quot;_NET_WM_STATE&quot;</span>, <span class="keyword">true</span> );</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>      Atom wm_fullscreen = XInternAtom (display, <span class="stringliteral">&quot;_NET_WM_STATE_FULLSCREEN&quot;</span>, <span class="keyword">true</span> );</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span> </div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>      XChangeProperty(display, window, wm_state, XA_ATOM, 32, PropModeReplace, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)&amp;wm_fullscreen, 1);</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span> </div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>      ScreenResolution(display, root, width, height, 60, <span class="keyword">false</span>);</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>    }</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span> </div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>  XMapWindow(display, window);</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>  XMoveWindow(display, window,x,y);</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span> </div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>  CreateBuffers();</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span> </div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>  XFlush(display);</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span> </div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="group___g_r_a_p_h_i_c.html#ga6fa475c9228a35f6e835dfcd759eafbb">GRPSCREEN::Create</a>(show);</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>}</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span> </div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span> </div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span><span class="keywordtype">bool</span> GRPLINUXSCREENX11::Update()</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>{</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>}</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span> </div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span> </div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span><span class="keywordtype">bool</span> GRPLINUXSCREENX11::Update(<a class="code hl_class" href="class_g_r_p_c_a_n_v_a_s.html">GRPCANVAS</a>* canvas)</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>{</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>  <span class="keywordflow">if</span>(!display) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>  <span class="keywordflow">if</span>(!window)  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>  <span class="keywordflow">if</span>(!canvas)  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span> </div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>  GC gc = XCreateGC(display, window, 0, <a class="code hl_define" href="_x_base_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>  <span class="keywordflow">if</span>(gc)</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>    {</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>      XSync(display,<span class="keyword">false</span>);</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span> </div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>      <span class="keywordflow">if</span>(IsEqualSizeTo(canvas) == <a class="code hl_define" href="_x_base_8h.html#a146f6c83bfa09e308b1f8e423085c8d4">ISEQUAL</a>)</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>        {</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>          XImage* image = CreateXImageFromBuffer(display, DefaultScreen(display), (<a class="code hl_typedef" href="_x_base_8h.html#a7ba3d378cab4450418bec78e604d47da">XBYTE</a>*)canvas-&gt;<a class="code hl_function" href="group___g_r_a_p_h_i_c.html#ga17c51ff97e0d74bc3510b2eff0dd9abf">GetBuffer</a>(), width, height);</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>          <span class="keywordflow">if</span>(image)</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>            {</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>              XPutImage(display, window, gc, image, 0, 0, 0, 0, width, height);</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>              XDestroyImage(image);</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>            }</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>        }</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>        {</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>          canvas-&gt;<a class="code hl_function" href="group___g_r_a_p_h_i_c.html#gab887fce477778abe690c6fdc74fc6d8c">CopyBufferRenderToScreen</a>(<span class="keyword">this</span>);</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span> </div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>          XImage* image = CreateXImageFromBuffer(display, DefaultScreen(display), (<a class="code hl_typedef" href="_x_base_8h.html#a7ba3d378cab4450418bec78e604d47da">XBYTE</a>*)buffer, width, height);</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>          <span class="keywordflow">if</span>(image)</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>            {</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>              XPutImage(display, window, gc, image, 0, 0, 0, 0, width, height);</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>              XDestroyImage(image);</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>            }</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>        }</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span> </div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>      XFreeGC(display, gc);</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>    }</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span> </div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>  XFlush(display);</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span> </div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>}</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span> </div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span> </div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span><span class="keywordtype">bool</span> GRPLINUXSCREENX11::Delete()</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>{</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>  <span class="keywordflow">if</span>(!display) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>  <span class="keywordflow">if</span>(!window)  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span> </div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>  DeleteBuffers();</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span> </div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>  XDestroyWindow(display, window);</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span> </div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>  isactive = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span> </div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>}</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span> </div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span> </div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span><span class="keywordtype">bool</span> GRPLINUXSCREENX11::Resize(<span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height)</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>{</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>  XResizeWindow(display, window, width, height);</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span> </div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>  <span class="keywordflow">return</span> UpdateSize(width, height);</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>}</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span> </div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span> </div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span><span class="keywordtype">bool</span> GRPLINUXSCREENX11::Show(<span class="keywordtype">bool</span> active)</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>{</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>  isshow  = active;</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span> </div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>}</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span> </div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span> </div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span><span class="keywordtype">bool</span> GRPLINUXSCREENX11::ShowCursor(<span class="keywordtype">bool</span> active)</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>{</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>  <span class="keywordflow">if</span>(!active)</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>    {</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>      <span class="comment">// vars to make blank cursor</span></div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>      Pixmap  blank;</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>      XColor  dummy;</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>      <span class="keywordtype">char</span>    data[1] = { 0 };</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>      Cursor  cursor;</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span> </div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>      <span class="comment">// make a blank cursor</span></div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>      blank = XCreateBitmapFromData(display, window, data, 1, 1);</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>      <span class="keywordflow">if</span>(blank != None)</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>        {</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>          cursor = XCreatePixmapCursor(display, blank, blank, &amp;dummy, &amp;dummy, 0, 0);</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>          XFreePixmap(display, blank);</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>          XDefineCursor(display, window,cursor);</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span> </div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>        } <span class="keywordflow">else</span> <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>    }</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>   <span class="keywordflow">else</span></div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>    {</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>      XUndefineCursor(display, window);</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>    }</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span> </div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>}</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span> </div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span> </div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span><span class="keywordtype">void</span>* GRPLINUXSCREENX11::GetHandle()</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>{</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>  <span class="keywordflow">return</span> (<span class="keywordtype">void</span>*)window;</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span> </div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>}</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span> </div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span> </div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span><span class="keywordtype">bool</span>  GRPLINUXSCREENX11::IsDesktop()</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>{</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>  <span class="keywordflow">return</span> isdesktop;</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>}</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span> </div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span> </div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span><span class="keywordtype">void</span> GRPLINUXSCREENX11::SetIsDesktop(<span class="keywordtype">bool</span> isdesktop)</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>{</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>  this-&gt;isdesktop = isdesktop;</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>}</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span> </div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span> </div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span><span class="keywordtype">bool</span> GRPLINUXSCREENX11::HasFocus()</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>{</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>  Window focus;</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>  <span class="keywordtype">int</span>    status = 0;</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span> </div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>  XGetInputFocus(display, &amp;focus, &amp;status);</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span> </div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>  <span class="keywordflow">if</span>(focus ==  window) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span> </div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>}</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span> </div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span> </div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>Display* GRPLINUXSCREENX11::GetDisplay()</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>{</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>  <span class="keywordflow">return</span> display;</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>}</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span> </div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span> </div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>Window* GRPLINUXSCREENX11::GetWindow()</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>{</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>  <span class="keywordflow">return</span> &amp;window;</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>}</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span> </div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span> </div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span><span class="keywordtype">int</span> GRPLINUXSCREENX11::ScreenResolution(Display* display, Window  root, <span class="keywordtype">int</span> xsz, <span class="keywordtype">int</span> ysz, <span class="keywordtype">int</span> rate, <span class="keywordtype">int</span> just_checking)</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>{</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>  XRRScreenConfiguration*   xrr_config = 0;</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>  <span class="keywordtype">int</span>                       event_base;</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>  <span class="keywordtype">int</span>                       error_base;</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>  <span class="keywordtype">int</span>                       ver_major;</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>  <span class="keywordtype">int</span>                       ver_minor;</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>  <span class="keywordtype">int</span>                       use_rate;</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>  Status                    result = -1;</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span> </div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>  <span class="keywordflow">if</span>(!display) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span> </div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>  <span class="comment">// must check at runtime for the availability of the extension</span></div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>  <span class="keywordflow">if</span>(!XRRQueryExtension(display, &amp;event_base, &amp;error_base))</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>    {</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>    }</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span> </div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>  XRRQueryVersion(display, &amp;ver_major, &amp;ver_minor);</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span> </div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>  <span class="comment">// we only heed the rate if we CAN actually use it (Xrandr &gt;= 1.1) and the user actually cares about it (rate &gt; 0)</span></div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>  use_rate = ( rate &gt; 0 ) &amp;&amp; ( ( ver_major &gt; 1 ) || (( ver_major == 1 ) &amp;&amp; ( ver_minor &gt;= 1 )));</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span> </div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>  <span class="comment">// this loop is only so that the whole thing will be repeated if someone else changes video mode between our query of the current information and the attempt to change it.</span></div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>  <span class="keywordflow">do</span>{</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>        XRRScreenSize*  ssizes;</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>        <span class="keywordtype">short</span>*          rates;</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>        Rotation        rot;</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>        <span class="keywordtype">int</span>             i;</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>        <span class="keywordtype">int</span>             ssizes_count;</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>        <span class="keywordtype">int</span>             rates_count;</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>        <span class="keywordtype">int</span>             curr;</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>        <span class="keywordtype">int</span>             res_idx = -1;</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>        Time timestamp, cfg_timestamp;</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span> </div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>        <span class="keywordflow">if</span>(xrr_config) XRRFreeScreenConfigInfo(xrr_config);</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span> </div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>        <span class="keywordflow">if</span>(!(xrr_config = XRRGetScreenInfo(display, root)))</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>          {</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>            <span class="comment">//fgWarning(&quot;XRRGetScreenInfo failed&quot;);</span></div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>          }</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span> </div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>        ssizes    = XRRConfigSizes(xrr_config, &amp;ssizes_count);</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>        curr      = XRRConfigCurrentConfiguration(xrr_config, &amp;rot);</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>        timestamp = XRRConfigTimes(xrr_config, &amp;cfg_timestamp);</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span> </div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>        <span class="comment">// if either of xsz or ysz are unspecified, use the current values</span></div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>        <span class="keywordflow">if</span>(xsz &lt;= 0) xsz =  ssizes[curr].width;</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>        <span class="keywordflow">if</span>(ysz &lt;= 0) ysz =  ssizes[curr].height;</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span> </div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>        <span class="keywordflow">if</span>(xsz == ssizes[curr].width &amp;&amp; ysz == ssizes[curr].height)</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>          {</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>            <span class="comment">// no need to switch, we&#39;re already in the requested resolution</span></div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>            res_idx = curr;</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>          }</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>         <span class="keywordflow">else</span></div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>          {</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>            <span class="keywordflow">for</span>(i=0; i&lt;ssizes_count; i++)</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>              {</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>                <span class="keywordflow">if</span>(ssizes[i].width == xsz &amp;&amp; ssizes[i].height == ysz)</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>                  {</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>                    res_idx = i;</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>                    <span class="keywordflow">break</span>;  <span class="comment">// found it</span></div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>                  }</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>              }</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>          }</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span> </div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>        <span class="keywordflow">if</span>(res_idx == -1) <span class="keywordflow">break</span>;  <span class="comment">// no matching resolution</span></div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span> </div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span><span class="preprocessor">        #if ( RANDR_MAJOR &gt; 1 ) || ( ( RANDR_MAJOR == 1 ) &amp;&amp; ( RANDR_MINOR &gt;= 1 ) )</span></div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>        <span class="keywordflow">if</span>(use_rate)</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>          {</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>            <span class="comment">// for the selected resolution, let&#39;s find out if there is a matching refresh rate available.</span></div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>            rates = XRRConfigRates(xrr_config, res_idx, &amp;rates_count);</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span> </div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>            <span class="keywordflow">for</span>(i=0; i&lt;rates_count; i++)</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>              {</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>                <span class="keywordflow">if</span>(rates[i] == rate)</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>                  {</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>                  }</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>              }</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span> </div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>            <span class="keywordflow">if</span>(i == rates_count) <span class="keywordflow">break</span>; <span class="comment">// no matching rate</span></div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>          }</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span><span class="preprocessor">        #endif</span></div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span> </div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>        <span class="keywordflow">if</span>(just_checking)</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>          {</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>            result = 0;</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>          }</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span> </div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span><span class="preprocessor">        #if ( RANDR_MAJOR &gt; 1 ) || ( ( RANDR_MAJOR == 1 ) &amp;&amp; ( RANDR_MINOR &gt;= 1 ) )</span></div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>        <span class="keywordflow">if</span>(use_rate)</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>              result = XRRSetScreenConfigAndRate(display, xrr_config, root, res_idx, rot, rate, timestamp);</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span><span class="preprocessor">        #endif</span></div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>              result = XRRSetScreenConfig(display, xrr_config, root, res_idx, rot, timestamp);</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span> </div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>    } <span class="keywordflow">while</span>(result == RRSetConfigInvalidTime);</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span> </div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>  <span class="keywordflow">if</span>(xrr_config) XRRFreeScreenConfigInfo(xrr_config);</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span> </div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>  <span class="keywordflow">if</span>(result == 0) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span> </div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>  <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>}</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span> </div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span> </div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>XImage* GRPLINUXSCREENX11::CreateXImageFromBuffer(Display* display, <span class="keywordtype">int</span> screen, <a class="code hl_typedef" href="_x_base_8h.html#a7ba3d378cab4450418bec78e604d47da">XBYTE</a>* buffer, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height)</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>{</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>  XImage* image = <a class="code hl_define" href="_x_base_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>  <span class="keywordtype">int</span>     depth;</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>  Visual* visual;</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>  <span class="keywordtype">double</span>  rratio;</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>  <span class="keywordtype">double</span>  gratio;</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>  <span class="keywordtype">double</span>  bratio;</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>  <span class="keywordtype">int</span>     outindex       = 0;</div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>  <span class="keywordtype">int</span>     numbufferbytes = (3 * (width * height));</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span> </div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>  depth  = DefaultDepth(display,screen);</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>  visual = DefaultVisual(display,screen);</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span> </div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>  rratio = visual-&gt;red_mask   / 255.0;</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>  gratio = visual-&gt;green_mask / 255.0;</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>  bratio = visual-&gt;blue_mask  / 255.0;</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span> </div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>  <span class="keywordflow">if</span>(depth &gt;= 24)</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>    {</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>      <span class="keywordtype">int</span>    numnewbufferbytes = (4 * (width * height));</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>      <a class="code hl_typedef" href="_x_base_8h.html#a0e5b572e67f127f1afb599e257c539cf">XDWORD</a>* newbuffer        = (<a class="code hl_typedef" href="_x_base_8h.html#a0e5b572e67f127f1afb599e257c539cf">XDWORD</a>*)malloc(numnewbufferbytes);</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span> </div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> index=0;index&lt;numbufferbytes;)</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>        {</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>          <a class="code hl_typedef" href="_x_base_8h.html#a0e5b572e67f127f1afb599e257c539cf">XDWORD</a> b = (buffer[index++] * bratio);</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>          <a class="code hl_typedef" href="_x_base_8h.html#a0e5b572e67f127f1afb599e257c539cf">XDWORD</a> g = (buffer[index++] * gratio);</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>          <a class="code hl_typedef" href="_x_base_8h.html#a0e5b572e67f127f1afb599e257c539cf">XDWORD</a> r = (buffer[index++] * rratio);</div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span> </div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>          r &amp;= visual-&gt;red_mask;</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>          g &amp;= visual-&gt;green_mask;</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>          b &amp;= visual-&gt;blue_mask;</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span> </div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>          newbuffer[outindex] = r | g | b;</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span> </div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>          ++outindex;</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>        }</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span> </div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>      image = XCreateImage (display, CopyFromParent, depth,  ZPixmap, 0, (<span class="keywordtype">char</span> *)newbuffer,width, height, 32, 0);</div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>    }</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>    {</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>      <span class="keywordflow">if</span>(depth &gt;= 15)</div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>        {</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>          <span class="keywordtype">int</span>   numnewbufferbytes = (2 * (width * height));</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>          <a class="code hl_typedef" href="_x_base_8h.html#a3f1fe1487089bc987e3d549a9064e653">XWORD</a>* newbuffer          = (<a class="code hl_typedef" href="_x_base_8h.html#a3f1fe1487089bc987e3d549a9064e653">XWORD</a>*)malloc(numnewbufferbytes);</div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span> </div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>          <span class="keywordflow">for</span>(<span class="keywordtype">int</span> index=0;index&lt;numbufferbytes;)</div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>            {</div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>              <a class="code hl_typedef" href="_x_base_8h.html#a0e5b572e67f127f1afb599e257c539cf">XDWORD</a> b = (buffer[index++] * bratio);</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>              <a class="code hl_typedef" href="_x_base_8h.html#a0e5b572e67f127f1afb599e257c539cf">XDWORD</a> g = (buffer[index++] * gratio);</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>              <a class="code hl_typedef" href="_x_base_8h.html#a0e5b572e67f127f1afb599e257c539cf">XDWORD</a> r = (buffer[index++] * rratio);</div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span> </div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>              r &amp;= visual-&gt;red_mask;</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>              g &amp;= visual-&gt;green_mask;</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>              b &amp;= visual-&gt;blue_mask;</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span> </div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>              newbuffer[outindex] = r | g | b;</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span> </div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>              ++outindex;</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>            }</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span> </div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>          image = XCreateImage(display, CopyFromParent, depth, ZPixmap, 0, (<span class="keywordtype">char</span>*)newbuffer, width, height, 16, 0);</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span> </div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>        }  <span class="keywordflow">else</span> <span class="keywordflow">return</span> <a class="code hl_define" href="_x_base_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span>    }</div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span> </div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>  XInitImage(image);</div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span> </div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>  <span class="keywordflow">if</span>(LSBFirst == GetByteOrder())</div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>          image-&gt;byte_order = LSBFirst;</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>    <span class="keywordflow">else</span> image-&gt;byte_order = MSBFirst;</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span> </div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>  image-&gt;bitmap_bit_order = MSBFirst;</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span> </div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>  <span class="keywordflow">return</span> image;</div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>}</div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span> </div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span> </div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span><span class="keywordtype">int</span> GRPLINUXSCREENX11::GetByteOrder()</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>{</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span>  <span class="keyword">union</span></div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>  {</div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>    <span class="keywordtype">char</span> c[<span class="keyword">sizeof</span>(short)];</div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>    <span class="keywordtype">short</span> s;</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span> </div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>  } order;</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span> </div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>  order.s = 1;</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>  <span class="keywordflow">if</span>((1 == order.c[0]))</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>    {</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>      <span class="keywordflow">return</span> LSBFirst;</div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>    }</div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>   <span class="keywordflow">else</span></div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>    {</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>      <span class="keywordflow">return</span> MSBFirst;</div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>    }</div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span>}</div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span> </div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span> </div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span><span class="keywordtype">void</span> GRPLINUXSCREENX11::Clean()</div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span>{</div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span>  display   = <a class="code hl_define" href="_x_base_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span>  window    = 0;</div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span> </div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span>  isdesktop = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>}</div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span> </div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span> </div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span><span class="preprocessor">#pragma endregion</span></div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span> </div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span> </div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span> </div>
<div class="ttc" id="a_g_e_n___defines_8h_html"><div class="ttname"><a href="_g_e_n___defines_8h.html">GEN_Defines.h</a></div></div>
<div class="ttc" id="a_g_r_p_canvas_8h_html"><div class="ttname"><a href="_g_r_p_canvas_8h.html">GRPCanvas.h</a></div></div>
<div class="ttc" id="a_g_r_p_l_i_n_u_x_screen_x11_8h_html"><div class="ttname"><a href="_g_r_p_l_i_n_u_x_screen_x11_8h.html">GRPLINUXScreenX11.h</a></div></div>
<div class="ttc" id="a_g_r_p_properties_8h_html_af987094c3c6c0910d472c6c95a548365a745e53fb66eed25ca4ee68167c68a48d"><div class="ttname"><a href="_g_r_p_properties_8h.html#af987094c3c6c0910d472c6c95a548365a745e53fb66eed25ca4ee68167c68a48d">GRPPROPERTYMODE_32_BGRA_8888</a></div><div class="ttdeci">@ GRPPROPERTYMODE_32_BGRA_8888</div><div class="ttdef"><b>Definition</b> <a href="_g_r_p_properties_8h_source.html#l00054">GRPProperties.h:54</a></div></div>
<div class="ttc" id="a_g_r_p_properties_8h_html_af987094c3c6c0910d472c6c95a548365a79643bdbeae1e79973771780d48194f1"><div class="ttname"><a href="_g_r_p_properties_8h.html#af987094c3c6c0910d472c6c95a548365a79643bdbeae1e79973771780d48194f1">GRPPROPERTYMODE_16_RGB_565</a></div><div class="ttdeci">@ GRPPROPERTYMODE_16_RGB_565</div><div class="ttdef"><b>Definition</b> <a href="_g_r_p_properties_8h_source.html#l00049">GRPProperties.h:49</a></div></div>
<div class="ttc" id="a_g_r_p_properties_8h_html_af987094c3c6c0910d472c6c95a548365a9207ca848d5052d2735cc569785cc701"><div class="ttname"><a href="_g_r_p_properties_8h.html#af987094c3c6c0910d472c6c95a548365a9207ca848d5052d2735cc569785cc701">GRPPROPERTYMODE_08_INDEX</a></div><div class="ttdeci">@ GRPPROPERTYMODE_08_INDEX</div><div class="ttdef"><b>Definition</b> <a href="_g_r_p_properties_8h_source.html#l00046">GRPProperties.h:46</a></div></div>
<div class="ttc" id="a_g_r_p_properties_8h_html_af987094c3c6c0910d472c6c95a548365afd21f0dc81224177cb44aec0fc7fc324"><div class="ttname"><a href="_g_r_p_properties_8h.html#af987094c3c6c0910d472c6c95a548365afd21f0dc81224177cb44aec0fc7fc324">GRPPROPERTYMODE_24_BGR_888</a></div><div class="ttdeci">@ GRPPROPERTYMODE_24_BGR_888</div><div class="ttdef"><b>Definition</b> <a href="_g_r_p_properties_8h_source.html#l00052">GRPProperties.h:52</a></div></div>
<div class="ttc" id="a_g_r_p_screen_8h_html_a13ec223f83fb0f13672bfa7b4f0abcb2a826707b209cf4cb191d70a9d2ca9750a"><div class="ttname"><a href="_g_r_p_screen_8h.html#a13ec223f83fb0f13672bfa7b4f0abcb2a826707b209cf4cb191d70a9d2ca9750a">GRPSCREENTYPE_LINUX_X11</a></div><div class="ttdeci">@ GRPSCREENTYPE_LINUX_X11</div><div class="ttdef"><b>Definition</b> <a href="_g_r_p_screen_8h_source.html#l00060">GRPScreen.h:60</a></div></div>
<div class="ttc" id="a_x_base_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="_x_base_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition</b> <a href="_x_base_8h_source.html#l00086">XBase.h:86</a></div></div>
<div class="ttc" id="a_x_base_8h_html_a0e5b572e67f127f1afb599e257c539cf"><div class="ttname"><a href="_x_base_8h.html#a0e5b572e67f127f1afb599e257c539cf">XDWORD</a></div><div class="ttdeci">unsigned int XDWORD</div><div class="ttdef"><b>Definition</b> <a href="_x_base_8h_source.html#l00052">XBase.h:52</a></div></div>
<div class="ttc" id="a_x_base_8h_html_a146f6c83bfa09e308b1f8e423085c8d4"><div class="ttname"><a href="_x_base_8h.html#a146f6c83bfa09e308b1f8e423085c8d4">ISEQUAL</a></div><div class="ttdeci">#define ISEQUAL</div><div class="ttdef"><b>Definition</b> <a href="_x_base_8h_source.html#l00100">XBase.h:100</a></div></div>
<div class="ttc" id="a_x_base_8h_html_a3f1fe1487089bc987e3d549a9064e653"><div class="ttname"><a href="_x_base_8h.html#a3f1fe1487089bc987e3d549a9064e653">XWORD</a></div><div class="ttdeci">unsigned short XWORD</div><div class="ttdef"><b>Definition</b> <a href="_x_base_8h_source.html#l00048">XBase.h:48</a></div></div>
<div class="ttc" id="a_x_base_8h_html_a7ba3d378cab4450418bec78e604d47da"><div class="ttname"><a href="_x_base_8h.html#a7ba3d378cab4450418bec78e604d47da">XBYTE</a></div><div class="ttdeci">unsigned char XBYTE</div><div class="ttdef"><b>Definition</b> <a href="_x_base_8h_source.html#l00044">XBase.h:44</a></div></div>
<div class="ttc" id="a_x_memory___control_8h_html"><div class="ttname"><a href="_x_memory___control_8h.html">XMemory_Control.h</a></div></div>
<div class="ttc" id="a_x_trace_8h_html"><div class="ttname"><a href="_x_trace_8h.html">XTrace.h</a></div></div>
<div class="ttc" id="aclass_g_r_p_c_a_n_v_a_s_html"><div class="ttname"><a href="class_g_r_p_c_a_n_v_a_s.html">GRPCANVAS</a></div><div class="ttdoc">Graphics Canvas class.</div><div class="ttdef"><b>Definition</b> <a href="_g_r_p_canvas_8h_source.html#l00109">GRPCanvas.h:110</a></div></div>
<div class="ttc" id="aclass_g_r_p_s_c_r_e_e_n_html"><div class="ttname"><a href="class_g_r_p_s_c_r_e_e_n.html">GRPSCREEN</a></div><div class="ttdoc">Graphics Screen Class.</div><div class="ttdef"><b>Definition</b> <a href="_g_r_p_screen_8h_source.html#l00079">GRPScreen.h:80</a></div></div>
<div class="ttc" id="agroup___g_r_a_p_h_i_c_html_ga17c51ff97e0d74bc3510b2eff0dd9abf"><div class="ttname"><a href="group___g_r_a_p_h_i_c.html#ga17c51ff97e0d74bc3510b2eff0dd9abf">GRPCANVAS::GetBuffer</a></div><div class="ttdeci">XBYTE * GetBuffer()</div><div class="ttdoc">Get Buffer.</div><div class="ttdef"><b>Definition</b> <a href="_g_r_p_canvas_8cpp_source.html#l00413">GRPCanvas.cpp:413</a></div></div>
<div class="ttc" id="agroup___g_r_a_p_h_i_c_html_ga6fa475c9228a35f6e835dfcd759eafbb"><div class="ttname"><a href="group___g_r_a_p_h_i_c.html#ga6fa475c9228a35f6e835dfcd759eafbb">GRPSCREEN::Create</a></div><div class="ttdeci">virtual bool Create(bool show)</div><div class="ttdoc">Create.</div><div class="ttdef"><b>Definition</b> <a href="_g_r_p_screen_8cpp_source.html#l00288">GRPScreen.cpp:288</a></div></div>
<div class="ttc" id="agroup___g_r_a_p_h_i_c_html_gab887fce477778abe690c6fdc74fc6d8c"><div class="ttname"><a href="group___g_r_a_p_h_i_c.html#gab887fce477778abe690c6fdc74fc6d8c">GRPCANVAS::CopyBufferRenderToScreen</a></div><div class="ttdeci">virtual bool CopyBufferRenderToScreen(GRPSCREEN *screen)</div><div class="ttdoc">CopyBufferRenderToScreen.</div><div class="ttdef"><b>Definition</b> <a href="_g_r_p_canvas_8cpp_source.html#l01167">GRPCanvas.cpp:1167</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_2e040ec9b9d60820d043c7ee76236f58.html">GEN</a></li><li class="navelem"><a class="el" href="dir_698557253b32cffe12710934e2777c68.html">Platforms</a></li><li class="navelem"><a class="el" href="dir_64752d72fca95c57de40d743c11658a4.html">Linux</a></li><li class="navelem"><a class="el" href="_g_r_p_l_i_n_u_x_screen_x11_8cpp.html">GRPLINUXScreenX11.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
