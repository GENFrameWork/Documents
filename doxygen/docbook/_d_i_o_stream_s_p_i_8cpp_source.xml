<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="__d_i_o_stream_s_p_i_8cpp_source" xml:lang="en-US">
<title>DIOStreamSPI.cpp</title>
<indexterm><primary>D:/Projects/GENFrameWork/GEN/DataIO/Streams/DIOStreamSPI.cpp</primary></indexterm>
Go to the documentation of this file.<programlisting linenumbering="unnumbered"><anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00001"/>00001 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00029"/>00029 <emphasis role="comment">/*----&#32;PRECOMPILATION&#32;INCLUDES&#32;----------------------------------------------------------------------------------------*/</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00030"/>00030 <emphasis role="preprocessor">#pragma&#32;region&#32;PRECOMPILATION_INCLUDES</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00031"/>00031 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00032"/>00032 <emphasis role="preprocessor">#include&#32;&quot;<link linkend="__g_e_n___defines_8h">GEN_Defines.h</link>&quot;</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00033"/>00033 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00034"/>00034 <emphasis role="preprocessor">#pragma&#32;endregion</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00035"/>00035 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00036"/>00036 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00037"/>00037 <emphasis role="comment">/*----&#32;INCLUDES&#32;------------------------------------------------------------------------------------------------------*/</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00038"/>00038 <emphasis role="preprocessor">#pragma&#32;region&#32;INCLUDES</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00039"/>00039 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00040"/>00040 <emphasis role="preprocessor">#include&#32;&quot;<link linkend="__d_i_o_stream_s_p_i_8h">DIOStreamSPI.h</link>&quot;</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00041"/>00041 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00042"/>00042 <emphasis role="preprocessor">#include&#32;&quot;<link linkend="__x_factory_8h">XFactory.h</link>&quot;</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00043"/>00043 <emphasis role="preprocessor">#include&#32;&quot;<link linkend="__x_buffer_8h">XBuffer.h</link>&quot;</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00044"/>00044 <emphasis role="preprocessor">#include&#32;&quot;<link linkend="__x_thread_collected_8h">XThreadCollected.h</link>&quot;</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00045"/>00045 <emphasis role="preprocessor">#include&#32;&quot;<link linkend="__x_trace_8h">XTrace.h</link>&quot;</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00046"/>00046 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00047"/>00047 <emphasis role="preprocessor">#include&#32;&quot;<link linkend="__d_i_o_factory_8h">DIOFactory.h</link>&quot;</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00048"/>00048 <emphasis role="preprocessor">#include&#32;&quot;<link linkend="__d_i_o_g_p_i_o_8h">DIOGPIO.h</link>&quot;</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00049"/>00049 <emphasis role="preprocessor">#include&#32;&quot;<link linkend="__d_i_o_stream_x_event_8h">DIOStreamXEvent.h</link>&quot;</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00050"/>00050 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00051"/>00051 <emphasis role="preprocessor">#include&#32;&quot;<link linkend="__d_i_o_stream_s_p_i_config_8h">DIOStreamSPIConfig.h</link>&quot;</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00052"/>00052 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00053"/>00053 <emphasis role="preprocessor">#include&#32;&quot;<link linkend="__x_memory___control_8h">XMemory_Control.h</link>&quot;</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00054"/>00054 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00055"/>00055 <emphasis role="preprocessor">#pragma&#32;endregion</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00056"/>00056 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00057"/>00057 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00058"/>00058 <emphasis role="comment">/*----&#32;GENERAL&#32;VARIABLE&#32;----------------------------------------------------------------------------------------------*/</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00059"/>00059 <emphasis role="preprocessor">#pragma&#32;region&#32;GENERAL_VARIABLE</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00060"/>00060 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00061"/>00061 <emphasis role="preprocessor">#pragma&#32;endregion</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00062"/>00062 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00063"/>00063 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00064"/>00064 <emphasis role="comment">/*----&#32;CLASS&#32;MEMBERS&#32;-------------------------------------------------------------------------------------------------*/</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00065"/>00065 <emphasis role="preprocessor">#pragma&#32;region&#32;CLASS_MEMBERS</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00066"/>00066 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00076"/><link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a038ca8ae929c47eba87ebe5dcefb6815">00076</link> <link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a038ca8ae929c47eba87ebe5dcefb6815">DIOSTREAMSPI::DIOSTREAMSPI</link>()&#32;:&#32;<link linkend="_class_d_i_o_s_t_r_e_a_m">DIOSTREAM</link>(),&#32;<link linkend="_class_x_f_s_m_a_c_h_i_n_e">XFSMACHINE</link>(0)
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00077"/>00077 {
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00078"/>00078 &#32;&#32;Clean();
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00079"/>00079 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00080"/>00080 &#32;&#32;<link linkend="_class_x_f_s_m_a_c_h_i_n_e_1ae678dcfeb2f9d70b6f7c9d4a367c861e">AddState</link>(&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a98dc9f915c8f11e2899898cf195d3001acec6009b55cc197b9942b8059f7a8628">DIOSTREAMSPI_FSMSTATE_NONE</link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;,
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00081"/>00081 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a96f3118de28a5ccd7be2a6a110eeb2d6a990dba83209e246afc1dce3f42e37e9f">DIOSTREAMSPI_FSMEVENT_CONNECTED</link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;,&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a98dc9f915c8f11e2899898cf195d3001a52592631ab3ce1eb8db4d848bb5160cd">DIOSTREAMSPI_FSMSTATE_CONNECTED</link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;,
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00082"/>00082 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a96f3118de28a5ccd7be2a6a110eeb2d6ac94daaf9a9669281b41562649e81acfc">DIOSTREAMSPI_FSMEVENT_DISCONNECTING</link>&#32;&#32;&#32;,&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a98dc9f915c8f11e2899898cf195d3001af6de7ed7f61ddcd53175bcbb14184d45">DIOSTREAMSPI_FSMSTATE_DISCONNECTING</link>&#32;&#32;&#32;&#32;,
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00083"/>00083 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="__x_f_s_machine_8h_1a33b7db38a7e9ca04fb2aa62ea3b2af33">XFSMACHINESTATE_EVENTDEFEND</link>);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00084"/>00084 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00085"/>00085 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00086"/>00086 &#32;&#32;<link linkend="_class_x_f_s_m_a_c_h_i_n_e_1ae678dcfeb2f9d70b6f7c9d4a367c861e">AddState</link>(&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a98dc9f915c8f11e2899898cf195d3001a52592631ab3ce1eb8db4d848bb5160cd">DIOSTREAMSPI_FSMSTATE_CONNECTED</link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;,
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00087"/>00087 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a96f3118de28a5ccd7be2a6a110eeb2d6aa43450cd41560243c1fd4b283e7641ba">DIOSTREAMSPI_FSMEVENT_WAITINGTOREAD</link>&#32;&#32;&#32;,&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a98dc9f915c8f11e2899898cf195d3001a883a5c754686098ba72e32dd415c0297">DIOSTREAMSPI_FSMSTATE_WAITINGTOREAD</link>&#32;&#32;&#32;&#32;,
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00088"/>00088 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a96f3118de28a5ccd7be2a6a110eeb2d6ad953eadde9d1ae646d2273d36429bb89">DIOSTREAMSPI_FSMEVENT_SENDINGDATA</link>&#32;&#32;&#32;&#32;&#32;,&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a98dc9f915c8f11e2899898cf195d3001a3ab9102a47e1285b192a8ce5836bb325">DIOSTREAMSPI_FSMSTATE_SENDINGDATA</link>&#32;&#32;&#32;&#32;&#32;&#32;,
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00089"/>00089 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a96f3118de28a5ccd7be2a6a110eeb2d6ac94daaf9a9669281b41562649e81acfc">DIOSTREAMSPI_FSMEVENT_DISCONNECTING</link>&#32;&#32;&#32;,&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a98dc9f915c8f11e2899898cf195d3001af6de7ed7f61ddcd53175bcbb14184d45">DIOSTREAMSPI_FSMSTATE_DISCONNECTING</link>&#32;&#32;&#32;&#32;,
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00090"/>00090 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="__x_f_s_machine_8h_1a33b7db38a7e9ca04fb2aa62ea3b2af33">XFSMACHINESTATE_EVENTDEFEND</link>);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00091"/>00091 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00092"/>00092 &#32;&#32;<link linkend="_class_x_f_s_m_a_c_h_i_n_e_1ae678dcfeb2f9d70b6f7c9d4a367c861e">AddState</link>(&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a98dc9f915c8f11e2899898cf195d3001a883a5c754686098ba72e32dd415c0297">DIOSTREAMSPI_FSMSTATE_WAITINGTOREAD</link>&#32;&#32;&#32;,
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00093"/>00093 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a96f3118de28a5ccd7be2a6a110eeb2d6a990dba83209e246afc1dce3f42e37e9f">DIOSTREAMSPI_FSMEVENT_CONNECTED</link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;,&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a98dc9f915c8f11e2899898cf195d3001a52592631ab3ce1eb8db4d848bb5160cd">DIOSTREAMSPI_FSMSTATE_CONNECTED</link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;,
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00094"/>00094 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a96f3118de28a5ccd7be2a6a110eeb2d6ad953eadde9d1ae646d2273d36429bb89">DIOSTREAMSPI_FSMEVENT_SENDINGDATA</link>&#32;&#32;&#32;&#32;&#32;,&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a98dc9f915c8f11e2899898cf195d3001a3ab9102a47e1285b192a8ce5836bb325">DIOSTREAMSPI_FSMSTATE_SENDINGDATA</link>&#32;&#32;&#32;&#32;&#32;&#32;,
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00095"/>00095 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a96f3118de28a5ccd7be2a6a110eeb2d6ac94daaf9a9669281b41562649e81acfc">DIOSTREAMSPI_FSMEVENT_DISCONNECTING</link>&#32;&#32;&#32;,&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a98dc9f915c8f11e2899898cf195d3001af6de7ed7f61ddcd53175bcbb14184d45">DIOSTREAMSPI_FSMSTATE_DISCONNECTING</link>&#32;&#32;&#32;&#32;,
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00096"/>00096 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="__x_f_s_machine_8h_1a33b7db38a7e9ca04fb2aa62ea3b2af33">XFSMACHINESTATE_EVENTDEFEND</link>);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00097"/>00097 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00098"/>00098 &#32;&#32;<link linkend="_class_x_f_s_m_a_c_h_i_n_e_1ae678dcfeb2f9d70b6f7c9d4a367c861e">AddState</link>(&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a98dc9f915c8f11e2899898cf195d3001af6de7ed7f61ddcd53175bcbb14184d45">DIOSTREAMSPI_FSMSTATE_DISCONNECTING</link>&#32;&#32;&#32;,
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00099"/>00099 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a96f3118de28a5ccd7be2a6a110eeb2d6a990dba83209e246afc1dce3f42e37e9f">DIOSTREAMSPI_FSMEVENT_CONNECTED</link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;,&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a98dc9f915c8f11e2899898cf195d3001a52592631ab3ce1eb8db4d848bb5160cd">DIOSTREAMSPI_FSMSTATE_CONNECTED</link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;,
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00100"/>00100 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a96f3118de28a5ccd7be2a6a110eeb2d6aa43450cd41560243c1fd4b283e7641ba">DIOSTREAMSPI_FSMEVENT_WAITINGTOREAD</link>&#32;&#32;&#32;,&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a98dc9f915c8f11e2899898cf195d3001a883a5c754686098ba72e32dd415c0297">DIOSTREAMSPI_FSMSTATE_WAITINGTOREAD</link>&#32;&#32;&#32;&#32;,
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00101"/>00101 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a96f3118de28a5ccd7be2a6a110eeb2d6ad953eadde9d1ae646d2273d36429bb89">DIOSTREAMSPI_FSMEVENT_SENDINGDATA</link>&#32;&#32;&#32;&#32;&#32;,&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a98dc9f915c8f11e2899898cf195d3001a3ab9102a47e1285b192a8ce5836bb325">DIOSTREAMSPI_FSMSTATE_SENDINGDATA</link>&#32;&#32;&#32;&#32;&#32;&#32;,
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00102"/>00102 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="__x_f_s_machine_8h_1a33b7db38a7e9ca04fb2aa62ea3b2af33">XFSMACHINESTATE_EVENTDEFEND</link>);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00103"/>00103 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00104"/>00104 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00105"/>00105 &#32;&#32;threadconnection&#32;=&#32;<link linkend="__x_thread_collected_8h_1aad503e3655b9ff78d3ac660d1f1f5534">CREATEXTHREAD</link>(<link linkend="__x_thread_8h_1a32ad650cdcf0656f543da04bc3ac68a6a30fc7b8d19c0a99364d2df8b682f6e5b">XTHREADGROUPID_DIOSTREAMSPI</link>,&#32;<link linkend="__x_string_8h_1a2cbff438813b72648c18c8af875f47c9">__L</link>(<emphasis role="stringliteral">&quot;DIOSTREAMSPI::DIOSTREAMSPI&quot;</emphasis>),ThreadConnection,(<emphasis role="keywordtype">void</emphasis>*)<emphasis role="keyword">this</emphasis>);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00106"/>00106 &#32;&#32;threadconnection-&gt;SetPriority(<link linkend="__x_thread_8h_1a9082e176800b19a3e755ff93b5678735a4b42faec7b757dfc7b060562531707c7">XTHREADPRIORITY_HIGH</link>);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00107"/>00107 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00108"/>00108 &#32;&#32;GEN_XFACTORY_CREATE(<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a3fb27b0c996558ee216b2bcb4b180382">xtimer</link>,&#32;CreateTimer())
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00109"/>00109 }
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00110"/>00110 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00111"/>00111 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00122"/><link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1aee5e143b6136f118fbdab12a699a97b7">00122</link> <link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1aee5e143b6136f118fbdab12a699a97b7">DIOSTREAMSPI::~DIOSTREAMSPI</link>()
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00123"/>00123 {
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00124"/>00124 &#32;&#32;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a02de4aa3e65df850f7e881dbd78085ba">Close</link>();
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00125"/>00125 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00126"/>00126 &#32;&#32;<emphasis role="keywordflow">if</emphasis>(threadconnection)&#32;&#32;<link linkend="__x_thread_collected_8h_1a18fb843f5fbad51464b68d705ed29b8a">DELETEXTHREAD</link>(<link linkend="__x_thread_8h_1a32ad650cdcf0656f543da04bc3ac68a6a30fc7b8d19c0a99364d2df8b682f6e5b">XTHREADGROUPID_DIOSTREAMSPI</link>,&#32;threadconnection);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00127"/>00127 &#32;&#32;<emphasis role="keywordflow">if</emphasis>(<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a3fb27b0c996558ee216b2bcb4b180382">xtimer</link>)&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;GEN_XFACTORY.DeleteTimer(<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a3fb27b0c996558ee216b2bcb4b180382">xtimer</link>);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00128"/>00128 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00129"/>00129 &#32;&#32;Clean();
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00130"/>00130 }
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00131"/>00131 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00132"/>00132 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00142"/><link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a1bc0f15764060e62608b1918dcecd9c7">00142</link> <link linkend="_class_d_i_o_s_t_r_e_a_m_c_o_n_f_i_g">DIOSTREAMCONFIG</link>*&#32;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a1bc0f15764060e62608b1918dcecd9c7">DIOSTREAMSPI::GetConfig</link>()
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00143"/>00143 {
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00144"/>00144 &#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;(<link linkend="_class_d_i_o_s_t_r_e_a_m_c_o_n_f_i_g">DIOSTREAMCONFIG</link>*)<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a48ed26560b85cc226aabe299d7c18db6">config</link>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00145"/>00145 }
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00146"/>00146 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00147"/>00147 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00159"/><link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1afe2c3f6451c856a97860d6f4f0a832f5">00159</link> <emphasis role="keywordtype">bool</emphasis>&#32;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1afe2c3f6451c856a97860d6f4f0a832f5">DIOSTREAMSPI::SetConfig</link>(<link linkend="_class_d_i_o_s_t_r_e_a_m_c_o_n_f_i_g">DIOSTREAMCONFIG</link>*&#32;config)
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00160"/>00160 {
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00161"/>00161 &#32;&#32;<emphasis role="keywordflow">if</emphasis>(!<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a48ed26560b85cc226aabe299d7c18db6">config</link>)&#32;<emphasis role="keywordflow">return</emphasis>&#32;<emphasis role="keyword">false</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00162"/>00162 &#32;&#32;this-&gt;config&#32;=&#32;(<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_c_o_n_f_i_g">DIOSTREAMSPICONFIG</link>*)<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a48ed26560b85cc226aabe299d7c18db6">config</link>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00163"/>00163 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00164"/>00164 &#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<emphasis role="keyword">true</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00165"/>00165 }
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00166"/>00166 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00167"/>00167 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00177"/><link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a2f0f851406dce28fc0e4bd8da4b43f2b">00177</link> <emphasis role="keywordtype">bool</emphasis>&#32;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a2f0f851406dce28fc0e4bd8da4b43f2b">DIOSTREAMSPI::Open</link>()
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00178"/>00178 {
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00179"/>00179 &#32;&#32;<emphasis role="keywordflow">if</emphasis>(!<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a48ed26560b85cc226aabe299d7c18db6">config</link>)&#32;<emphasis role="keywordflow">return</emphasis>&#32;<emphasis role="keyword">false</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00180"/>00180 &#32;&#32;<emphasis role="keywordflow">if</emphasis>(!<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a3fb27b0c996558ee216b2bcb4b180382">xtimer</link>)&#32;<emphasis role="keywordflow">return</emphasis>&#32;<emphasis role="keyword">false</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00181"/>00181 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00182"/>00182 &#32;&#32;<emphasis role="keywordflow">if</emphasis>(!threadconnection)&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<emphasis role="keyword">false</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00183"/>00183 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00184"/>00184 &#32;&#32;<emphasis role="keywordflow">if</emphasis>(!<link linkend="_class_d_i_o_s_t_r_e_a_m_1a72a177fdb426d29a7c43e4072aaffacf">inbuffer</link>)&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<emphasis role="keyword">false</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00185"/>00185 &#32;&#32;<emphasis role="keywordflow">if</emphasis>(!<link linkend="_class_d_i_o_s_t_r_e_a_m_1a84369729b86da099bda346a62a75cc43">outbuffer</link>)&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<emphasis role="keyword">false</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00186"/>00186 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00187"/>00187 &#32;&#32;<emphasis role="keywordflow">if</emphasis>(<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a48ed26560b85cc226aabe299d7c18db6">config</link>-&gt;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_c_o_n_f_i_g_1a32e7abb543f031c471285ca300d5b778">IsDirectAccess</link>())
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00188"/>00188 &#32;&#32;&#32;&#32;{&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00189"/>00189 &#32;&#32;&#32;&#32;&#32;&#32;GPIO_Entry[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2a0e91336b25e4a50846f84406d7c783ae">DIOSTREAMSPI_GPIO_CLK</link>]&#32;&#32;&#32;&#32;&#32;=&#32;GEN_DIOGPIO.GPIOEntry_GetByID(<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a48ed26560b85cc226aabe299d7c18db6">config</link>-&gt;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_c_o_n_f_i_g_1a73e319f2ac411ea9aacb2575d5ecd455">GetPinsDirectAccess</link>()[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2a0e91336b25e4a50846f84406d7c783ae">DIOSTREAMSPI_GPIO_CLK</link>]);&#32;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00190"/>00190 &#32;&#32;&#32;&#32;&#32;&#32;GPIO_Entry[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2aa9c8f7da862869d417e6ecbe15c8dd37">DIOSTREAMSPI_GPIO_MISO</link>]&#32;&#32;&#32;&#32;=&#32;GEN_DIOGPIO.GPIOEntry_GetByID(<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a48ed26560b85cc226aabe299d7c18db6">config</link>-&gt;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_c_o_n_f_i_g_1a73e319f2ac411ea9aacb2575d5ecd455">GetPinsDirectAccess</link>()[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2aa9c8f7da862869d417e6ecbe15c8dd37">DIOSTREAMSPI_GPIO_MISO</link>]);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00191"/>00191 &#32;&#32;&#32;&#32;&#32;&#32;GPIO_Entry[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2a8b4941cf3aaaed8daccd3fd862324000">DIOSTREAMSPI_GPIO_MOSI</link>]&#32;&#32;&#32;&#32;=&#32;GEN_DIOGPIO.GPIOEntry_GetByID(<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a48ed26560b85cc226aabe299d7c18db6">config</link>-&gt;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_c_o_n_f_i_g_1a73e319f2ac411ea9aacb2575d5ecd455">GetPinsDirectAccess</link>()[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2a8b4941cf3aaaed8daccd3fd862324000">DIOSTREAMSPI_GPIO_MOSI</link>]);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00192"/>00192 &#32;&#32;&#32;&#32;&#32;&#32;GPIO_Entry[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2a350e9a428362a54a3b232838db42f1c5">DIOSTREAMSPI_GPIO_CS</link>]&#32;&#32;&#32;&#32;&#32;&#32;=&#32;GEN_DIOGPIO.GPIOEntry_GetByID(<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a48ed26560b85cc226aabe299d7c18db6">config</link>-&gt;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_c_o_n_f_i_g_1a73e319f2ac411ea9aacb2575d5ecd455">GetPinsDirectAccess</link>()[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2a350e9a428362a54a3b232838db42f1c5">DIOSTREAMSPI_GPIO_CS</link>]);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00193"/>00193 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00194"/>00194 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00195"/>00195 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>(GPIO_Entry[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2a0e91336b25e4a50846f84406d7c783ae">DIOSTREAMSPI_GPIO_CLK</link>])&#32;&#32;&#32;GEN_DIOGPIO.<link linkend="_class_d_i_o_g_p_i_o___e_n_t_r_y_1a1b2bb814609b192da96fdd0bc58d4769">SetMode</link>(GPIO_Entry[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2a0e91336b25e4a50846f84406d7c783ae">DIOSTREAMSPI_GPIO_CLK</link>]&#32;&#32;&#32;,&#32;<link linkend="__d_i_o_g_p_i_o_8h_1a35602bfdf7d8cd6a558027a378f50041">DIOGPIO_MODE_INPUT</link>);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00196"/>00196 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>(GPIO_Entry[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2aa9c8f7da862869d417e6ecbe15c8dd37">DIOSTREAMSPI_GPIO_MISO</link>])&#32;&#32;GEN_DIOGPIO.SetMode(GPIO_Entry[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2aa9c8f7da862869d417e6ecbe15c8dd37">DIOSTREAMSPI_GPIO_MISO</link>]&#32;&#32;,&#32;<link linkend="__d_i_o_g_p_i_o_8h_1af43e26d0701212b8857b22becaa4c416">DIOGPIO_MODE_OUTPUT</link>);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00197"/>00197 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>(GPIO_Entry[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2a8b4941cf3aaaed8daccd3fd862324000">DIOSTREAMSPI_GPIO_MOSI</link>])&#32;&#32;GEN_DIOGPIO.SetMode(GPIO_Entry[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2a8b4941cf3aaaed8daccd3fd862324000">DIOSTREAMSPI_GPIO_MOSI</link>]&#32;&#32;,&#32;<link linkend="__d_i_o_g_p_i_o_8h_1a35602bfdf7d8cd6a558027a378f50041">DIOGPIO_MODE_INPUT</link>);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00198"/>00198 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>(GPIO_Entry[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2a350e9a428362a54a3b232838db42f1c5">DIOSTREAMSPI_GPIO_CS</link>])&#32;&#32;&#32;&#32;GEN_DIOGPIO.SetMode(GPIO_Entry[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2a350e9a428362a54a3b232838db42f1c5">DIOSTREAMSPI_GPIO_CS</link>]&#32;&#32;&#32;&#32;,&#32;<link linkend="__d_i_o_g_p_i_o_8h_1a35602bfdf7d8cd6a558027a378f50041">DIOGPIO_MODE_INPUT</link>);&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00199"/>00199 &#32;&#32;&#32;&#32;}
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00200"/>00200 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00201"/>00201 &#32;&#32;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1af36735c8748f16c5e827ba06e76240dc">bufferread</link>&#32;&#32;&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;<link linkend="__x_base_8h_1a7ba3d378cab4450418bec78e604d47da">XBYTE</link>[<link linkend="__d_i_o_stream_s_p_i_8h_1a8d820730bd71e4c705e0b4b56d7742e2">DIOSTREAMSPI_MAXSIZEBUFFER</link>];
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00202"/>00202 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00203"/>00203 &#32;&#32;mode&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&#32;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a48ed26560b85cc226aabe299d7c18db6">config</link>-&gt;<link linkend="_class_d_i_o_s_t_r_e_a_m_c_o_n_f_i_g_1aba1906e3d4e113b11492f6de0264a42e">GetMode</link>();
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00204"/>00204 &#32;&#32;nbitsword&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&#32;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a48ed26560b85cc226aabe299d7c18db6">config</link>-&gt;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_c_o_n_f_i_g_1a6bebe630e2423621eb4441cce20ed13b">GetNBitsWord</link>();
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00205"/>00205 &#32;&#32;timedelay&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&#32;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a48ed26560b85cc226aabe299d7c18db6">config</link>-&gt;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_c_o_n_f_i_g_1ad95abb71eb38f3dad47e0f21992536fd">GetDelay</link>();
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00206"/>00206 &#32;&#32;timedelaydouble&#32;&#32;*=&#32;timedelay;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00207"/>00207 &#32;&#32;CSline&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&#32;((mode&#32;&amp;&#32;<link linkend="__d_i_o_stream_s_p_i_config_8h_1aa6400791fbba98c8719b0abe26ac8268">DIOSTREAMSPI_CS_HIGH</link>)&#32;&#32;&#32;==&#32;<link linkend="__d_i_o_stream_s_p_i_config_8h_1aa6400791fbba98c8719b0abe26ac8268">DIOSTREAMSPI_CS_HIGH</link>);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00208"/>00208 &#32;&#32;lbsfirst&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&#32;((mode&#32;&amp;&#32;<link linkend="__d_i_o_stream_s_p_i_config_8h_1a476d7698f6dba98b2007be5208814616">DIOSTREAMSPI_LSB_FIRST</link>)&#32;==&#32;<link linkend="__d_i_o_stream_s_p_i_config_8h_1a476d7698f6dba98b2007be5208814616">DIOSTREAMSPI_LSB_FIRST</link>);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00209"/>00209 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00210"/>00210 &#32;&#32;<emphasis role="keywordflow">if</emphasis>(<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a48ed26560b85cc226aabe299d7c18db6">config</link>-&gt;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_c_o_n_f_i_g_1a32e7abb543f031c471285ca300d5b778">IsDirectAccess</link>())
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00211"/>00211 &#32;&#32;&#32;&#32;{
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00212"/>00212 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">switch</emphasis>(mode)
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00213"/>00213 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00214"/>00214 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;<link linkend="__d_i_o_stream_s_p_i_config_8h_1abb2d3909f7d4a40ee0fb5f20e4c3f189">DIOSTREAMSPI_MODE_0</link>:
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00215"/>00215 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;<link linkend="__d_i_o_stream_s_p_i_config_8h_1a3bad15f940fadc328d692edab150a4be">DIOSTREAMSPI_MODE_1</link>:&#32;GEN_DIOGPIO.SetValue(GPIO_Entry[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2a0e91336b25e4a50846f84406d7c783ae">DIOSTREAMSPI_GPIO_CLK</link>],&#32;&#32;<emphasis role="keyword">false</emphasis>);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00216"/>00216 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">break</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00217"/>00217 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00218"/>00218 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;<link linkend="__d_i_o_stream_s_p_i_config_8h_1a7d145afc6f168b0ea9519cb5fc8b868f">DIOSTREAMSPI_MODE_2</link>:
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00219"/>00219 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;<link linkend="__d_i_o_stream_s_p_i_config_8h_1a6514d21fba39bc721572adfe8a25e854">DIOSTREAMSPI_MODE_3</link>:&#32;GEN_DIOGPIO.SetValue(GPIO_Entry[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2a0e91336b25e4a50846f84406d7c783ae">DIOSTREAMSPI_GPIO_CLK</link>],&#32;<emphasis role="keyword">true</emphasis>);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00220"/>00220 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">break</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00221"/>00221 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00222"/>00222 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00223"/>00223 &#32;&#32;&#32;&#32;&#32;&#32;GEN_DIOGPIO.SetValue(GPIO_Entry[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2a350e9a428362a54a3b232838db42f1c5">DIOSTREAMSPI_GPIO_CS</link>],&#32;CSline);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00224"/>00224 &#32;&#32;&#32;&#32;}
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00225"/>00225 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00226"/>00226 &#32;&#32;<link linkend="_class_x_f_s_m_a_c_h_i_n_e_1a9cfb136fd0f76df9b29a7d7bbeadd30a">SetEvent</link>(<link linkend="__d_i_o_stream_s_p_i_8h_1a96f3118de28a5ccd7be2a6a110eeb2d6a990dba83209e246afc1dce3f42e37e9f">DIOSTREAMSPI_FSMEVENT_CONNECTED</link>);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00227"/>00227 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00228"/>00228 &#32;&#32;<link linkend="_class_d_i_o_s_t_r_e_a_m_1a06ffb9031fd93737d8097914e792665e">status</link>&#32;=&#32;<link linkend="__d_i_o_stream_8h_1ad10214ba9a07bd0f22017499f6f59a0fa264f9a9556afb61979d377ba92266a76">DIOSTREAMSTATUS_CONNECTED</link>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00229"/>00229 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00230"/>00230 &#32;&#32;<link linkend="_class_d_i_o_s_t_r_e_a_m_1a4e758727995cd3a8553dc3d64d18590f">ResetXBuffers</link>();
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00231"/>00231 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00232"/>00232 &#32;&#32;<link linkend="_class_d_i_o_s_t_r_e_a_m_1a5787d50f68e0eec558d5f31429e34f72">ResetConnectionStatistics</link>();
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00233"/>00233 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00234"/>00234 &#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;threadconnection-&gt;Ini();
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00235"/>00235 }
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00236"/>00236 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00237"/>00237 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00247"/><link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a02de4aa3e65df850f7e881dbd78085ba">00247</link> <emphasis role="keywordtype">bool</emphasis>&#32;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a02de4aa3e65df850f7e881dbd78085ba">DIOSTREAMSPI::Close</link>()
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00248"/>00248 {
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00249"/>00249 &#32;&#32;<emphasis role="keywordflow">if</emphasis>(<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a48ed26560b85cc226aabe299d7c18db6">config</link>-&gt;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_c_o_n_f_i_g_1a32e7abb543f031c471285ca300d5b778">IsDirectAccess</link>())&#32;GEN_DIOGPIO.SetValue(GPIO_Entry[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2a350e9a428362a54a3b232838db42f1c5">DIOSTREAMSPI_GPIO_CS</link>],&#32;!CSline);&#32;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00250"/>00250 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00251"/>00251 &#32;&#32;<emphasis role="keywordflow">if</emphasis>(!threadconnection)&#32;<emphasis role="keywordflow">return</emphasis>&#32;<emphasis role="keyword">false</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00252"/>00252 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00253"/>00253 &#32;&#32;threadconnection-&gt;End();
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00254"/>00254 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00255"/>00255 &#32;&#32;<emphasis role="keywordflow">if</emphasis>(<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1af36735c8748f16c5e827ba06e76240dc">bufferread</link>)
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00256"/>00256 &#32;&#32;&#32;&#32;{
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00257"/>00257 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">delete</emphasis>&#32;[]&#32;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1af36735c8748f16c5e827ba06e76240dc">bufferread</link>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00258"/>00258 &#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1af36735c8748f16c5e827ba06e76240dc">bufferread</link>&#32;=&#32;<link linkend="__x_base_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</link>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00259"/>00259 &#32;&#32;&#32;&#32;}
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00260"/>00260 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00261"/>00261 &#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<emphasis role="keyword">true</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00262"/>00262 }
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00263"/>00263 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00264"/>00264 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00278"/><link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1ad68789490253c3d92cb7209deab9d6e5">00278</link> <emphasis role="keywordtype">bool</emphasis>&#32;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1ad68789490253c3d92cb7209deab9d6e5">DIOSTREAMSPI::TransferBuffer</link>(<link linkend="__x_base_8h_1a7ba3d378cab4450418bec78e604d47da">XBYTE</link>*&#32;bufferread,&#32;<link linkend="__x_base_8h_1a7ba3d378cab4450418bec78e604d47da">XBYTE</link>*&#32;bufferwrite,&#32;<link linkend="__x_base_8h_1a0e5b572e67f127f1afb599e257c539cf">XDWORD</link>&#32;size)
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00279"/>00279 {
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00280"/>00280 &#32;&#32;<emphasis role="keywordflow">if</emphasis>(!<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a48ed26560b85cc226aabe299d7c18db6">config</link>)&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<emphasis role="keyword">false</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00281"/>00281 &#32;&#32;<emphasis role="keywordflow">if</emphasis>(!<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a3fb27b0c996558ee216b2bcb4b180382">xtimer</link>)&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<emphasis role="keyword">false</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00282"/>00282 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00283"/>00283 &#32;&#32;<emphasis role="keywordflow">if</emphasis>(!GPIO_Entry[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2a0e91336b25e4a50846f84406d7c783ae">DIOSTREAMSPI_GPIO_CLK</link>])&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<emphasis role="keyword">false</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00284"/>00284 &#32;&#32;<emphasis role="keywordflow">if</emphasis>(!GPIO_Entry[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2a8b4941cf3aaaed8daccd3fd862324000">DIOSTREAMSPI_GPIO_MOSI</link>])&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<emphasis role="keyword">false</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00285"/>00285 &#32;&#32;<emphasis role="keywordflow">if</emphasis>(!GPIO_Entry[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2a350e9a428362a54a3b232838db42f1c5">DIOSTREAMSPI_GPIO_CS</link>])&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<emphasis role="keyword">false</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00286"/>00286 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00287"/>00287 &#32;&#32;<emphasis role="keywordflow">if</emphasis>(<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a48ed26560b85cc226aabe299d7c18db6">config</link>-&gt;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_c_o_n_f_i_g_1a6bebe630e2423621eb4441cce20ed13b">GetNBitsWord</link>()&lt;=8)
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00288"/>00288 &#32;&#32;&#32;&#32;{
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00289"/>00289 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>(<link linkend="__x_base_8h_1a0e5b572e67f127f1afb599e257c539cf">XDWORD</link>&#32;c=0;c&lt;size;c++)
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00290"/>00290 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00291"/>00291 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="__x_base_8h_1a3f1fe1487089bc987e3d549a9064e653">XWORD</link>&#32;readdata;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00292"/>00292 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00293"/>00293 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;TransferOneData(bufferwrite[c],&#32;readdata);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00294"/>00294 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00295"/>00295 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1af36735c8748f16c5e827ba06e76240dc">bufferread</link>[c]&#32;=&#32;(<link linkend="__x_base_8h_1a7ba3d378cab4450418bec78e604d47da">XBYTE</link>)readdata;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00296"/>00296 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00297"/>00297 &#32;&#32;&#32;&#32;}
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00298"/>00298 &#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00299"/>00299 &#32;&#32;&#32;&#32;{
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00300"/>00300 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>(<link linkend="__x_base_8h_1a0e5b572e67f127f1afb599e257c539cf">XDWORD</link>&#32;c=0;&#32;c&lt;size;&#32;c+=2)
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00301"/>00301 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00302"/>00302 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="__x_base_8h_1a3f1fe1487089bc987e3d549a9064e653">XWORD</link>&#32;readdata;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00303"/>00303 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//XWORD&#32;writedata&#32;=&#32;bufferwrite[c];</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00304"/>00304 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00305"/>00305 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//writedata&lt;&lt;=8;</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00306"/>00306 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//writedata&#32;|=&#32;bufferwrite[c];</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00307"/>00307 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00308"/>00308 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;TransferOneData(bufferwrite[c],&#32;readdata);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00309"/>00309 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00310"/>00310 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1af36735c8748f16c5e827ba06e76240dc">bufferread</link>[c]&#32;&#32;&#32;=&#32;(<link linkend="__x_base_8h_1a7ba3d378cab4450418bec78e604d47da">XBYTE</link>)(readdata&gt;&gt;8);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00311"/>00311 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1af36735c8748f16c5e827ba06e76240dc">bufferread</link>[c+1]&#32;=&#32;(<link linkend="__x_base_8h_1a7ba3d378cab4450418bec78e604d47da">XBYTE</link>)(readdata&amp;0xFF);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00312"/>00312 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00313"/>00313 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00314"/>00314 &#32;&#32;&#32;&#32;}
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00315"/>00315 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00316"/>00316 &#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<emphasis role="keyword">true</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00317"/>00317 }
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00318"/>00318 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00319"/>00319 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00331"/><link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a6b8db18f24d484952b4c9cf091ecb0d1">00331</link> <emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a6b8db18f24d484952b4c9cf091ecb0d1">DIOSTREAMSPI::Sleep</link>(<emphasis role="keywordtype">int</emphasis>&#32;<link linkend="__d_i_o_w_i_n_d_o_w_s_notifications_manager_8h_1a6651a982e902850154af16d890039253">count</link>)
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00332"/>00332 {
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00333"/>00333 &#32;&#32;<emphasis role="comment">/*</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00334"/>00334 <emphasis role="comment">&#32;&#32;int&#32;i&#32;=&#32;0;</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00335"/>00335 <emphasis role="comment">&#32;&#32;for(i=0;i&lt;count;i++)</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00336"/>00336 <emphasis role="comment">&#32;&#32;&#32;&#32;{</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00337"/>00337 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;#ifdef&#32;LINUX</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00338"/>00338 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;asm(&quot;nop&quot;);</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00339"/>00339 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;#endif</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00340"/>00340 <emphasis role="comment"></emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00341"/>00341 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;#ifdef&#32;_MSC_VER</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00342"/>00342 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;__nop();</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00343"/>00343 <emphasis role="comment">//&#32;&#32;&#32;&#32;&#32;&#32;__asm&#32;nop;</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00344"/>00344 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;#endif</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00345"/>00345 <emphasis role="comment"></emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00346"/>00346 <emphasis role="comment">&#32;&#32;&#32;&#32;}</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00347"/>00347 <emphasis role="comment">&#32;&#32;*/</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00348"/>00348 }
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00349"/>00349 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00350"/>00350 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00361"/>00361 <emphasis role="keywordtype">void</emphasis>&#32;DIOSTREAMSPI::Clean()
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00362"/>00362 {
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00363"/>00363 &#32;&#32;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a48ed26560b85cc226aabe299d7c18db6">config</link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&#32;<link linkend="__x_base_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</link>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00364"/>00364 &#32;&#32;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a3fb27b0c996558ee216b2bcb4b180382">xtimer</link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&#32;<link linkend="__x_base_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</link>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00365"/>00365 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00366"/>00366 &#32;&#32;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1af36735c8748f16c5e827ba06e76240dc">bufferread</link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&#32;<link linkend="__x_base_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</link>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00367"/>00367 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00368"/>00368 &#32;&#32;threadconnection&#32;&#32;=&#32;<link linkend="__x_base_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</link>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00369"/>00369 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00370"/>00370 &#32;&#32;<emphasis role="keywordflow">for</emphasis>(<emphasis role="keywordtype">int</emphasis>&#32;c=0;&#32;c&lt;<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2a4fa38bfd4c7318fb64850a6b9f9864a1">DIOSTREAMSPI_GPIO_MAX</link>;&#32;c++)
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00371"/>00371 &#32;&#32;&#32;&#32;{
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00372"/>00372 &#32;&#32;&#32;&#32;&#32;&#32;GPIO_Entry[c]&#32;=&#32;<link linkend="__x_base_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</link>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00373"/>00373 &#32;&#32;&#32;&#32;}
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00374"/>00374 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00375"/>00375 &#32;&#32;mode&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&#32;<link linkend="__d_i_o_stream_s_p_i_config_8h_1abb2d3909f7d4a40ee0fb5f20e4c3f189">DIOSTREAMSPI_MODE_0</link>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00376"/>00376 &#32;&#32;nbitsword&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&#32;0;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00377"/>00377 &#32;&#32;timedelay&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&#32;0;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00378"/>00378 &#32;&#32;timedelaydouble&#32;&#32;&#32;=&#32;0;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00379"/>00379 &#32;&#32;CSline&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&#32;<emphasis role="keyword">false</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00380"/>00380 &#32;&#32;lbsfirst&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&#32;<emphasis role="keyword">false</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00381"/>00381 }
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00382"/>00382 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00383"/>00383 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00396"/>00396 <emphasis role="keywordtype">bool</emphasis>&#32;DIOSTREAMSPI::TransferOneData(<link linkend="__x_base_8h_1a3f1fe1487089bc987e3d549a9064e653">XWORD</link>&#32;writedata,<link linkend="__x_base_8h_1a3f1fe1487089bc987e3d549a9064e653">XWORD</link>&amp;&#32;readdata)
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00397"/>00397 {
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00398"/>00398 &#32;&#32;<emphasis role="keywordflow">if</emphasis>(!<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a48ed26560b85cc226aabe299d7c18db6">config</link>-&gt;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_c_o_n_f_i_g_1a32e7abb543f031c471285ca300d5b778">IsDirectAccess</link>())&#32;<emphasis role="keywordflow">return</emphasis>&#32;<emphasis role="keyword">false</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00399"/>00399 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00400"/>00400 &#32;&#32;<link linkend="__x_base_8h_1a3f1fe1487089bc987e3d549a9064e653">XWORD</link>&#32;mask&#32;=&#32;0x0001;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00401"/>00401 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00402"/>00402 &#32;&#32;<emphasis role="keywordflow">if</emphasis>(!lbsfirst)&#32;mask&lt;&lt;=(nbitsword-1);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00403"/>00403 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00404"/>00404 &#32;&#32;readdata&#32;=&#32;0;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00405"/>00405 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00406"/>00406 &#32;&#32;<emphasis role="keywordflow">for</emphasis>(<emphasis role="keywordtype">int</emphasis>&#32;c=0;c&lt;nbitsword;c++)
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00407"/>00407 &#32;&#32;&#32;&#32;{
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00408"/>00408 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">switch</emphasis>(mode)
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00409"/>00409 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00410"/>00410 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;<link linkend="__d_i_o_stream_s_p_i_config_8h_1abb2d3909f7d4a40ee0fb5f20e4c3f189">DIOSTREAMSPI_MODE_0</link>:&#32;GEN_DIOGPIO.SetValue(GPIO_Entry[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2a8b4941cf3aaaed8daccd3fd862324000">DIOSTREAMSPI_GPIO_MOSI</link>]&#32;,&#32;(writedata&amp;mask)?<emphasis role="keyword">true</emphasis>:<emphasis role="keyword">false</emphasis>);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00411"/>00411 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>(GEN_DIOGPIO.GetValue(GPIO_Entry[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2aa9c8f7da862869d417e6ecbe15c8dd37">DIOSTREAMSPI_GPIO_MISO</link>]))&#32;readdata&#32;|=&#32;&#32;mask;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00412"/>00412 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a27baa393eb4eadb9e94e49e4b656d1a7">DIOSTREAMSPI_SLEEP</link>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00413"/>00413 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;GEN_DIOGPIO.SetValue(GPIO_Entry[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2a0e91336b25e4a50846f84406d7c783ae">DIOSTREAMSPI_GPIO_CLK</link>],&#32;<emphasis role="keyword">true</emphasis>);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00414"/>00414 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a20a071a5c2350917726efbcabced2993">DIOSTREAMSPI_SLEEPDOUBLE</link>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00415"/>00415 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;GEN_DIOGPIO.SetValue(GPIO_Entry[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2a0e91336b25e4a50846f84406d7c783ae">DIOSTREAMSPI_GPIO_CLK</link>],&#32;<emphasis role="keyword">false</emphasis>);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00416"/>00416 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">break</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00417"/>00417 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00418"/>00418 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;<link linkend="__d_i_o_stream_s_p_i_config_8h_1a3bad15f940fadc328d692edab150a4be">DIOSTREAMSPI_MODE_1</link>:
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00419"/>00419 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;<link linkend="__d_i_o_stream_s_p_i_config_8h_1a7d145afc6f168b0ea9519cb5fc8b868f">DIOSTREAMSPI_MODE_2</link>:
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00420"/>00420 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;GEN_DIOGPIO.SetValue(GPIO_Entry[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2a0e91336b25e4a50846f84406d7c783ae">DIOSTREAMSPI_GPIO_CLK</link>],&#32;<emphasis role="keyword">true</emphasis>);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00421"/>00421 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;GEN_DIOGPIO.SetValue(GPIO_Entry[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2a8b4941cf3aaaed8daccd3fd862324000">DIOSTREAMSPI_GPIO_MOSI</link>],&#32;(writedata&amp;mask)?<emphasis role="keyword">true</emphasis>:<emphasis role="keyword">false</emphasis>);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00422"/>00422 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>(GEN_DIOGPIO.GetValue(GPIO_Entry[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2aa9c8f7da862869d417e6ecbe15c8dd37">DIOSTREAMSPI_GPIO_MISO</link>]))&#32;readdata&#32;|=&#32;&#32;mask;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00423"/>00423 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a27baa393eb4eadb9e94e49e4b656d1a7">DIOSTREAMSPI_SLEEP</link>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00424"/>00424 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;GEN_DIOGPIO.SetValue(GPIO_Entry[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2a0e91336b25e4a50846f84406d7c783ae">DIOSTREAMSPI_GPIO_CLK</link>],&#32;<emphasis role="keyword">false</emphasis>);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00425"/>00425 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a20a071a5c2350917726efbcabced2993">DIOSTREAMSPI_SLEEPDOUBLE</link>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00426"/>00426 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">break</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00427"/>00427 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00428"/>00428 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;<link linkend="__d_i_o_stream_s_p_i_config_8h_1a6514d21fba39bc721572adfe8a25e854">DIOSTREAMSPI_MODE_3</link>:
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00429"/>00429 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;GEN_DIOGPIO.SetValue(GPIO_Entry[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2a0e91336b25e4a50846f84406d7c783ae">DIOSTREAMSPI_GPIO_CLK</link>],&#32;<emphasis role="keyword">false</emphasis>);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00430"/>00430 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;GEN_DIOGPIO.SetValue(GPIO_Entry[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2a8b4941cf3aaaed8daccd3fd862324000">DIOSTREAMSPI_GPIO_MOSI</link>],&#32;(writedata&amp;mask)?<emphasis role="keyword">true</emphasis>:<emphasis role="keyword">false</emphasis>);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00431"/>00431 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>(GEN_DIOGPIO.GetValue(GPIO_Entry[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2aa9c8f7da862869d417e6ecbe15c8dd37">DIOSTREAMSPI_GPIO_MISO</link>]))&#32;readdata&#32;|=&#32;&#32;mask;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00432"/>00432 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a27baa393eb4eadb9e94e49e4b656d1a7">DIOSTREAMSPI_SLEEP</link>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00433"/>00433 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;GEN_DIOGPIO.SetValue(GPIO_Entry[<link linkend="__d_i_o_stream_s_p_i_config_8h_1a2fa9b4bdb48a0de23ca0f78e6caa8ae2a0e91336b25e4a50846f84406d7c783ae">DIOSTREAMSPI_GPIO_CLK</link>],&#32;<emphasis role="keyword">true</emphasis>);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00434"/>00434 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a20a071a5c2350917726efbcabced2993">DIOSTREAMSPI_SLEEPDOUBLE</link>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00435"/>00435 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">break</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00436"/>00436 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00437"/>00437 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00438"/>00438 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>(lbsfirst)&#32;mask&lt;&lt;=1;&#32;else&#32;mask&gt;&gt;=1;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00439"/>00439 &#32;&#32;&#32;&#32;}
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00440"/>00440 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00441"/>00441 &#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<emphasis role="keyword">true</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00442"/>00442 }
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00443"/>00443 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00444"/>00444 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00456"/>00456 <emphasis role="keywordtype">void</emphasis>&#32;DIOSTREAMSPI::ThreadConnection(<emphasis role="keywordtype">void</emphasis>*&#32;data)
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00457"/>00457 {
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00458"/>00458 &#32;&#32;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i">DIOSTREAMSPI</link>*&#32;diostream&#32;=&#32;(<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i">DIOSTREAMSPI</link>*)data;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00459"/>00459 &#32;&#32;<emphasis role="keywordflow">if</emphasis>(!diostream)&#32;<emphasis role="keywordflow">return</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00460"/>00460 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00461"/>00461 &#32;&#32;<emphasis role="keywordflow">if</emphasis>(diostream-&gt;<link linkend="_class_x_f_s_m_a_c_h_i_n_e_1ae7a2cc2cad190a10cb7154ff24c0609e">GetEvent</link>()==<link linkend="__d_i_o_stream_s_p_i_8h_1a96f3118de28a5ccd7be2a6a110eeb2d6ad2a8be778789f94173c5a8746037ef5a">DIOSTREAMSPI_FSMEVENT_NONE</link>)&#32;<emphasis role="comment">//&#32;No&#32;hay&#32;nuevos&#32;Eventos</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00462"/>00462 &#32;&#32;&#32;&#32;{
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00463"/>00463 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">switch</emphasis>(diostream-&gt;<link linkend="_class_x_f_s_m_a_c_h_i_n_e_1a02082325b435cf97f6b4c03a48cdfe86">GetCurrentState</link>())
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00464"/>00464 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00465"/>00465 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a98dc9f915c8f11e2899898cf195d3001acec6009b55cc197b9942b8059f7a8628">DIOSTREAMSPI_FSMSTATE_NONE</link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;:&#32;<emphasis role="keywordflow">break</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00466"/>00466 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00467"/>00467 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a98dc9f915c8f11e2899898cf195d3001a52592631ab3ce1eb8db4d848bb5160cd">DIOSTREAMSPI_FSMSTATE_CONNECTED</link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;:&#32;<emphasis role="keywordflow">break</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00468"/>00468 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00469"/>00469 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a98dc9f915c8f11e2899898cf195d3001a883a5c754686098ba72e32dd415c0297">DIOSTREAMSPI_FSMSTATE_WAITINGTOREAD</link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;:&#32;{&#32;<emphasis role="keywordflow">if</emphasis>(diostream-&gt;<link linkend="_class_d_i_o_s_t_r_e_a_m_1a84369729b86da099bda346a62a75cc43">outbuffer</link>-&gt;<link linkend="_class_x_b_u_f_f_e_r_1a7d9dd02f575c660481921bfcb3e11f21">IsBlocked</link>())&#32;<emphasis role="keywordflow">break</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00470"/>00470 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00471"/>00471 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">while</emphasis>(1)
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00472"/>00472 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00473"/>00473 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="__x_base_8h_1a0e5b572e67f127f1afb599e257c539cf">XDWORD</link>&#32;size&#32;&#32;=&#32;diostream-&gt;<link linkend="_class_d_i_o_s_t_r_e_a_m_1a84369729b86da099bda346a62a75cc43">outbuffer</link>-&gt;<link linkend="_class_x_b_u_f_f_e_r_1a726a6143d8a9293a199f8033c8198a0a">GetSize</link>();
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00474"/>00474 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00475"/>00475 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>(!size)&#32;<emphasis role="keywordflow">break</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00476"/>00476 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>(size&gt;(<link linkend="__x_base_8h_1a0e5b572e67f127f1afb599e257c539cf">XDWORD</link>)<link linkend="__d_i_o_stream_s_p_i_8h_1a8d820730bd71e4c705e0b4b56d7742e2">DIOSTREAMSPI_MAXSIZEBUFFER</link>)&#32;size&#32;=&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a8d820730bd71e4c705e0b4b56d7742e2">DIOSTREAMSPI_MAXSIZEBUFFER</link>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00477"/>00477 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00478"/>00478 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;memset(diostream-&gt;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1af36735c8748f16c5e827ba06e76240dc">bufferread</link>,&#32;0&#32;,&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a8d820730bd71e4c705e0b4b56d7742e2">DIOSTREAMSPI_MAXSIZEBUFFER</link>);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00479"/>00479 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00480"/>00480 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>(diostream-&gt;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1ad68789490253c3d92cb7209deab9d6e5">TransferBuffer</link>(diostream-&gt;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1af36735c8748f16c5e827ba06e76240dc">bufferread</link>,&#32;diostream-&gt;<link linkend="_class_d_i_o_s_t_r_e_a_m_1a84369729b86da099bda346a62a75cc43">outbuffer</link>-&gt;<link linkend="_class_x_b_u_f_f_e_r_1a59d2c2b8d1c32098920f5d3eba0a5971">Get</link>(),&#32;size))
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00481"/>00481 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00482"/>00482 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>(!diostream-&gt;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1a48ed26560b85cc226aabe299d7c18db6">config</link>-&gt;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_c_o_n_f_i_g_1a1c77876befa9d7dc022e21047c7f7b0e">IsOnlyWrite</link>())
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00483"/>00483 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00484"/>00484 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;diostream-&gt;<link linkend="_class_d_i_o_s_t_r_e_a_m_1a72a177fdb426d29a7c43e4072aaffacf">inbuffer</link>-&gt;<link linkend="_class_x_b_u_f_f_e_r_1a03212e4f31a9d07995ac4f72db1dd0cf">Add</link>(diostream-&gt;<link linkend="_class_d_i_o_s_t_r_e_a_m_s_p_i_1af36735c8748f16c5e827ba06e76240dc">bufferread</link>,size);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00485"/>00485 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00486"/>00486 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00487"/>00487 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;diostream-&gt;<link linkend="_class_d_i_o_s_t_r_e_a_m_1a84369729b86da099bda346a62a75cc43">outbuffer</link>-&gt;<link linkend="_class_x_b_u_f_f_e_r_1aa18ae97bc16eca76dad45de57c4dd08c">Extract</link>(<link linkend="__x_base_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</link>,&#32;0,&#32;size);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00488"/>00488 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00489"/>00489 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00490"/>00490 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00491"/>00491 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">break</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00492"/>00492 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00493"/>00493 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00494"/>00494 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a98dc9f915c8f11e2899898cf195d3001a3ab9102a47e1285b192a8ce5836bb325">DIOSTREAMSPI_FSMSTATE_SENDINGDATA</link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;:&#32;<emphasis role="keywordflow">break</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00495"/>00495 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00496"/>00496 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a98dc9f915c8f11e2899898cf195d3001af6de7ed7f61ddcd53175bcbb14184d45">DIOSTREAMSPI_FSMSTATE_DISCONNECTING</link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;:&#32;<emphasis role="keywordflow">break</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00497"/>00497 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00498"/>00498 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00499"/>00499 &#32;&#32;&#32;&#32;}
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00500"/>00500 &#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00501"/>00501 &#32;&#32;&#32;&#32;{
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00502"/>00502 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>(diostream-&gt;<link linkend="_class_x_f_s_m_a_c_h_i_n_e_1ae7a2cc2cad190a10cb7154ff24c0609e">GetEvent</link>()&lt;<link linkend="__d_i_o_stream_s_p_i_8h_1a96f3118de28a5ccd7be2a6a110eeb2d6aa63b55580596a09156afe52647c9d83e">DIOSTREAMSPI_LASTEVENT</link>)
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00503"/>00503 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00504"/>00504 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;diostream-&gt;<link linkend="_class_x_f_s_m_a_c_h_i_n_e_1a8210bbf1532d9f6a916d4b2204f04318">CheckTransition</link>();
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00505"/>00505 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00506"/>00506 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">switch</emphasis>(diostream-&gt;<link linkend="_class_x_f_s_m_a_c_h_i_n_e_1a02082325b435cf97f6b4c03a48cdfe86">GetCurrentState</link>())
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00507"/>00507 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00508"/>00508 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a98dc9f915c8f11e2899898cf195d3001acec6009b55cc197b9942b8059f7a8628">DIOSTREAMSPI_FSMSTATE_NONE</link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;:&#32;<emphasis role="keywordflow">break</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00509"/>00509 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00510"/>00510 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a98dc9f915c8f11e2899898cf195d3001a52592631ab3ce1eb8db4d848bb5160cd">DIOSTREAMSPI_FSMSTATE_CONNECTED</link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;:&#32;{&#32;<link linkend="_class_d_i_o_s_t_r_e_a_m_x_e_v_e_n_t">DIOSTREAMXEVENT</link>&#32;xevent(diostream,<link linkend="__d_i_o_stream_x_event_8h_1a03855c794a83f8d6c636156f111c4829a51978d78ab30f0f5237c9d2b78a80a85">DIOSTREAMXEVENT_TYPE_CONNECTED</link>);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00511"/>00511 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;xevent.SetDIOStream(diostream);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00512"/>00512 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;diostream-&gt;<link linkend="_class_x_s_u_b_j_e_c_t_1adb65926d5f56410c9243d2f7c69a87a3">PostEvent</link>(&amp;xevent);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00513"/>00513 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00514"/>00514 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;diostream-&gt;<link linkend="_class_x_f_s_m_a_c_h_i_n_e_1a9cfb136fd0f76df9b29a7d7bbeadd30a">SetEvent</link>(<link linkend="__d_i_o_stream_s_p_i_8h_1a96f3118de28a5ccd7be2a6a110eeb2d6aa43450cd41560243c1fd4b283e7641ba">DIOSTREAMSPI_FSMEVENT_WAITINGTOREAD</link>);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00515"/>00515 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00516"/>00516 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">break</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00517"/>00517 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00518"/>00518 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a98dc9f915c8f11e2899898cf195d3001a883a5c754686098ba72e32dd415c0297">DIOSTREAMSPI_FSMSTATE_WAITINGTOREAD</link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;:&#32;<emphasis role="keywordflow">break</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00519"/>00519 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00520"/>00520 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a98dc9f915c8f11e2899898cf195d3001a3ab9102a47e1285b192a8ce5836bb325">DIOSTREAMSPI_FSMSTATE_SENDINGDATA</link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;:&#32;<emphasis role="keywordflow">break</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00521"/>00521 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00522"/>00522 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;<link linkend="__d_i_o_stream_s_p_i_8h_1a98dc9f915c8f11e2899898cf195d3001af6de7ed7f61ddcd53175bcbb14184d45">DIOSTREAMSPI_FSMSTATE_DISCONNECTING</link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;:&#32;{&#32;<link linkend="_class_d_i_o_s_t_r_e_a_m_x_e_v_e_n_t">DIOSTREAMXEVENT</link>&#32;xevent(diostream,<link linkend="__d_i_o_stream_x_event_8h_1a03855c794a83f8d6c636156f111c4829ae953bc0973c4cdebf1b26ed06c424b52">DIOSTREAMXEVENT_TYPE_DISCONNECTED</link>);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00523"/>00523 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;xevent.SetDIOStream(diostream);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00524"/>00524 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;diostream-&gt;<link linkend="_class_x_s_u_b_j_e_c_t_1adb65926d5f56410c9243d2f7c69a87a3">PostEvent</link>(&amp;xevent);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00525"/>00525 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00526"/>00526 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;diostream-&gt;threadconnection-&gt;Run(<emphasis role="keyword">false</emphasis>);
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00527"/>00527 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;diostream-&gt;<link linkend="_class_d_i_o_s_t_r_e_a_m_1a06ffb9031fd93737d8097914e792665e">status</link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&#32;<link linkend="__d_i_o_stream_8h_1ad10214ba9a07bd0f22017499f6f59a0fa516b51b4debec043e34f66f0d4710fa2">DIOSTREAMSTATUS_DISCONNECTED</link>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00528"/>00528 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00529"/>00529 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">break</emphasis>;
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00530"/>00530 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00531"/>00531 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00532"/>00532 &#32;&#32;&#32;&#32;}
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00533"/>00533 }
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00534"/>00534 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00535"/>00535 
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00536"/>00536 <emphasis role="preprocessor">#pragma&#32;endregion</emphasis>
<anchor xml:id="__d_i_o_stream_s_p_i_8cpp_source_1l00537"/>00537 
</programlisting></section>
